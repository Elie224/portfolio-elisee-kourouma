<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Portfolio Functions</title>
</head>
<body>
    <h1>üîß Test des Fonctions Portfolio</h1>
    <div id="test-results"></div>

    <script>
        const results = document.getElementById('test-results');

        function addResult(message, success = true) {
            const color = success ? 'green' : 'red';
            results.innerHTML += `<p style="color: ${color};">${message}</p>`;
        }

        // Test 1: Check localStorage data
        addResult('üîç Test 1: V√©rification des donn√©es localStorage...');
        const portfolioData = localStorage.getItem('portfolioData');
        if (portfolioData) {
            try {
                const data = JSON.parse(portfolioData);
                addResult(`‚úÖ Donn√©es trouv√©es: ${data.projects?.length || 0} projets, ${data.skills?.length || 0} comp√©tences`);
            } catch (e) {
                addResult(`‚ùå Erreur parsing JSON: ${e.message}`, false);
            }
        } else {
            addResult('‚ùå Aucune donn√©e dans localStorage', false);
        }

        // Test 2: Check if elements exist
        addResult('üîç Test 2: V√©rification des √©l√©ments HTML...');
        const elements = ['homepage-projects', 'homepage-skills', 'projects-grid', 'about-skills'];
        elements.forEach(id => {
            const el = document.getElementById(id);
            addResult(`${el ? '‚úÖ' : '‚ùå'} √âl√©ment '${id}' ${el ? 'trouv√©' : 'non trouv√©'}`, !!el);
        });

        // Test 3: Simulate function calls
        addResult('üîç Test 3: Simulation des appels de fonctions...');

        // Simulate loadHomepageProjects
        function testLoadHomepageProjects() {
            const data = JSON.parse(localStorage.getItem('portfolioData') || '{}');
            const projects = data.projects || [];
            const container = document.getElementById('homepage-projects');

            if (container) {
                if (projects.length === 0) {
                    container.innerHTML = '<div class="card" style="text-align: center; padding: 32px; grid-column: 1/-1;"><h3>Mes projets appara√Ætront ici</h3><p class="muted">Les projets ajout√©s via l\'admin seront affich√©s dynamiquement.</p></div>';
                    addResult('‚úÖ loadHomepageProjects: Message "aucun projet" affich√©');
                } else {
                    const recentProjects = projects.slice(0, 4);
                    let projectsHtml = recentProjects.map(project => `
                        <div class="card project-card">
                            <h3>${project.title}</h3>
                            <p class="muted">${project.shortDesc || project.description}</p>
                            <div class="tech-tags">
                                ${(project.tags || []).map(tag => `<span class="tech-tag">${tag}</span>`).join('')}
                            </div>
                        </div>
                    `).join('');
                    container.innerHTML = projectsHtml;
                    addResult(`‚úÖ loadHomepageProjects: ${recentProjects.length} projets affich√©s`);
                }
            } else {
                addResult('‚ùå loadHomepageProjects: Container non trouv√©', false);
            }
        }

        // Simulate loadHomepageSkills
        function testLoadHomepageSkills() {
            const data = JSON.parse(localStorage.getItem('portfolioData') || '{}');
            const skills = data.skills || [];
            const container = document.getElementById('homepage-skills');

            if (container) {
                if (skills.length === 0) {
                    container.innerHTML = '<div class="card" style="text-align: center; padding: 32px; grid-column: 1/-1;"><h3>Mes comp√©tences appara√Ætront ici</h3><p class="muted">Les comp√©tences ajout√©es via l\'admin seront affich√©es dynamiquement.</p></div>';
                    addResult('‚úÖ loadHomepageSkills: Message "aucune comp√©tence" affich√©');
                } else {
                    const recentSkills = skills.slice(0, 3);
                    let skillsHtml = recentSkills.map(skill => `
                        <div class="card skill-card">
                            <div style="text-align: center; font-size: 48px; margin-bottom: 16px;">${skill.icon || 'üíª'}</div>
                            <h3 style="text-align: center; margin-bottom: 12px;">${skill.name}</h3>
                            <div class="skill-list">
                                ${(skill.skills || []).map(s => `<span class="tech-tag">${s}</span>`).join('')}
                            </div>
                        </div>
                    `).join('');
                    container.innerHTML = skillsHtml;
                    addResult(`‚úÖ loadHomepageSkills: ${recentSkills.length} comp√©tences affich√©es`);
                }
            } else {
                addResult('‚ùå loadHomepageSkills: Container non trouv√©', false);
            }
        }

        // Run tests
        setTimeout(() => {
            testLoadHomepageProjects();
            testLoadHomepageSkills();
        }, 100);

        // Add navigation
        document.body.innerHTML += '<br><br><a href="index.html">üè† Retour √† l\'accueil</a>';
    </script>
</body>
</html>